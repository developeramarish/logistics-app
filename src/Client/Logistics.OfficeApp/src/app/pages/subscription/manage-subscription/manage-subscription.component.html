<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>

<h1 class="text-center">Manage subscription</h1>
<hr class="w-100" />

<div class="d-flex flex-column gap-2">
  <!-- Current Plan Card -->
  <div class="col-12">
    <p-card header="Current Plan">
      <div class="row">
        <div class="col-6 fw-bold">Plan Name:</div>
        <div class="col-6">{{ subscription.plan?.name }}</div>

        <div class="col-6 fw-bold">Price per Employee:</div>
        <div class="col-6">{{ subscription.plan?.price | currency }}</div>

        <div class="col-6 fw-bold">Next Billing Date:</div>
        <div class="col-6">{{ subscription.nextPaymentDate | date }}</div>

        <div class="col-6 fw-bold">Status:</div>
        <div class="col-6">
          <p-tag [severity]="getSubStatusSeverity()" styleClass="text-center">
            {{ getSubStatusLabel() }}
          </p-tag>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <div class="d-flex gap-2">
          <p-button label="Change Plan" icon="pi pi-credit-card"></p-button>
          <p-button label="Cancel Subscription" icon="pi pi-times" severity="danger"></p-button>
        </div>
      </ng-template>
    </p-card>
  </div>

  <!-- Payment Method Card -->
  <div class="col-12">
    <p-card header="Payment Method">
      <ng-template pTemplate="footer">
        <p-button label="Update Payment Method" icon="pi pi-wallet"></p-button>
      </ng-template>
    </p-card>
  </div>

  <!-- Billing History Table -->
  <div class="col-12">
    <p-card header="Billing History">
      <app-billing-history></app-billing-history>
    </p-card>
  </div>
</div>
